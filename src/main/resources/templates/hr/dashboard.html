<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HR Dashboard - Users</title>
    <link rel="stylesheet" th:href="@{/css/dashboard.css}">
</head>
<body>
<div class="container">
    <!-- Header -->
    <div class="header">
        <h1>HR Dashboard</h1>
        <div class="header-info">
            <span class="user-count" th:text="${users.size()} + ' Users'">0 Users</span>
<!--            <a href="/logout" class="logout-btn">Logout</a>-->
        </div>
    </div>

<!--    &lt;!&ndash; Search and Filter &ndash;&gt;-->
<!--    <div class="controls">-->
<!--        <input type="text" id="searchInput" placeholder="Search by name, email, profession...">-->
<!--        <select id="professionFilter">-->
<!--            <option value="">All Professions</option>-->
<!--            <option value="DEVELOPER">Developer</option>-->
<!--            <option value="DESIGNER">Designer</option>-->
<!--            <option value="MANAGER">Manager</option>-->
<!--        </select>-->
<!--    </div>-->

    <!-- Users Grid -->
    <div class="users-grid">
        <div class="user-card" th:each="user : ${users}">
            <!-- User Header -->
            <div class="user-header">
                <div class="avatar">
                    <span th:text="${#strings.substring(user.name, 0, 1)}">A</span>
                </div>
                <div class="user-info">
                    <h2 class="user-name" th:text="${user.name}">User Name</h2>
<!--                    <span class="user-id" th:text="'ID: ' + ${user.id}">ID: 1</span>-->
                </div>
            </div>

            <!-- Profession Badge -->
            <div class="profession-badge" th:text="${user.profession}">
                Profession
            </div>

            <!-- User Details -->
            <div class="user-details">
                <div class="detail-item">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                    </svg>
                    <span th:text="${user.email}">email@example.com</span>
                </div>

                <div class="detail-item">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                    </svg>
                    <span th:text="${user.phone_number}">+123456789</span>
                </div>

                <div class="detail-item">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
                        <circle cx="12" cy="10" r="3"/>
                    </svg>
                    <span th:text="${user.country}">Country</span>
                </div>

                <div class="detail-item">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <span th:text="${user.experience} + ' years exp.'">0 years exp.</span>
                </div>
            </div>

            <!-- Job Responsibilities -->
            <div class="responsibilities">
                <h3>Responsibilities</h3>
                <p th:text="${user.jobResponsibilities}">
                    Job responsibilities description
                </p>
            </div>

            <!-- Actions -->
            <div class="card-actions">
                <button class="btn-view" th:onclick="'viewUser(' + ${user.id} + ')'">
                    View Details
                </button>
                <button class="btn-edit" th:onclick="'editUser(' + ${user.id} + ')'">
                    Edit
                </button>
            </div>
        </div>
    </div>

    <!-- Empty State -->
    <div class="empty-state" th:if="${users.isEmpty()}">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <path d="M23 21v-2a4 4 0 00-3-3.87m-4-12a4 4 0 010 7.75"/>
        </svg>
        <h2>No Users Found</h2>
        <p>There are no users to display at the moment.</p>
    </div>
</div>

<script>
    function viewUser(id) {
        window.location.href = '/hr/user/' + id;
    }

    function editUser(id) {
        window.location.href = '/hr/user/edit/' + id;
    }

    // Search functionality
    document.getElementById('searchInput').addEventListener('keyup', function() {
        filterUsers();
    });

    document.getElementById('professionFilter').addEventListener('change', function() {
        filterUsers();
    });

    function filterUsers() {
        const searchText = document.getElementById('searchInput').value.toLowerCase();
        const professionFilter = document.getElementById('professionFilter').value;
        const cards = document.querySelectorAll('.user-card');

        cards.forEach(card => {
            const name = card.querySelector('.user-name').textContent.toLowerCase();
            const email = card.querySelector('.detail-item span').textContent.toLowerCase();
            const profession = card.querySelector('.profession-badge').textContent.trim();

            const matchesSearch = name.includes(searchText) || email.includes(searchText);
            const matchesProfession = !professionFilter || profession === professionFilter;

            card.style.display = matchesSearch && matchesProfession ? 'block' : 'none';
        });
    }
</script>
</body>
</html>