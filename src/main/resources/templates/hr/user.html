<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Details - HR Dashboard</title>
    <link rel="stylesheet" th:href="@{/css/user-detail.css}">
</head>
<body>
<div class="container">
    <!-- Back Button -->
    <a href="/hr/dashboard" class="back-btn">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        Back to Dashboard
    </a>

    <div class="content-wrapper">
        <!-- Left Side - User Information -->
        <div class="user-info-section">
            <div class="user-card">
                <!-- User Header -->
                <div class="user-header">
                    <div class="avatar-large">
                        <span th:text="${#strings.substring(user.name, 0, 1)}">A</span>
                    </div>
                    <div class="user-title">
                        <h1 th:text="${user.name}">User Name</h1>
<!--                        <span class="user-id" th:text="'ID: ' + ${user.id}">ID: 1</span>-->
                    </div>
                </div>

                <!-- Profession Badge -->
                <div class="profession-section">
                    <span class="profession-badge" th:text="${user.profession}">Profession</span>
                    <span class="experience-badge" th:text="${user.experience} + ' years'">0 years</span>
                </div>

                <!-- Contact Information -->
                <div class="info-section">
                    <h2>Contact Information</h2>
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                </svg>
                                Email
                            </div>
                            <div class="info-value" th:text="${user.email}">email@example.com</div>
                        </div>

                        <div class="info-item">
                            <div class="info-label">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                                </svg>
                                Phone
                            </div>
                            <div class="info-value" th:text="${user.phone_number}">+123456789</div>
                        </div>

                        <div class="info-item">
                            <div class="info-label">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
                                    <circle cx="12" cy="10" r="3"/>
                                </svg>
                                Country
                            </div>
                            <div class="info-value" th:text="${user.country}">Country</div>
                        </div>

                        <div class="info-item">
                            <div class="info-label">
                                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <path d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                </svg>
                                Experience
                            </div>
                            <div class="info-value" th:text="${user.experience} + ' years'">0 years</div>
                        </div>
                    </div>
                </div>

                <!-- Job Responsibilities -->
                <div class="info-section">
                    <h2>Job Responsibilities</h2>
                    <div class="responsibilities-box">
                        <p th:text="${user.jobResponsibilities}">
                            Job responsibilities description goes here
                        </p>
                    </div>
                </div>

<!--                &lt;!&ndash; Action Buttons &ndash;&gt;-->
<!--                <div class="action-buttons">-->
<!--                    <button class="btn-edit" th:onclick="'window.location.href=\'/hr/user/edit/' + ${user.id} + '\''">-->
<!--                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">-->
<!--                            <path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>-->
<!--                        </svg>-->
<!--                        Edit User-->
<!--                    </button>-->
<!--                    <button class="btn-delete">-->
<!--                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">-->
<!--                            <path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>-->
<!--                        </svg>-->
<!--                        Delete User-->
<!--                    </button>-->
<!--                </div>-->
            </div>
        </div>

        <!-- Right Side - Email Form -->
        <div class="email-section">
            <div class="email-card">
                <div class="email-header">
                    <svg class="email-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                    </svg>
                    <h2>Send Email</h2>
                </div>

                <form th:action="@{/sendMail}" method="post" class="email-form">
                    <!-- Hidden User ID -->
                    <input type="hidden" name="userId" th:value="${user.id}">

                    <!-- Recipient (read-only) -->
                    <div class="form-group">
                        <label for="recipient">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                            </svg>
                            To
                        </label>
                        <input type="email"
                               id="recipient"
                               name="recipient"
                               th:value="${user.email}"
                               readonly
                               class="form-input readonly">
                    </div>

                    <!-- Subject -->
                    <div class="form-group">
                        <label for="subject">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"/>
                            </svg>
                            Subject
                        </label>
                        <input type="text"
                               id="subject"
                               name="subject"
                               placeholder="Enter email subject"
                               class="form-input"
                               required>
                    </div>

                    <!-- Message -->
                    <div class="form-group">
                        <label for="message">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                            </svg>
                            Message
                        </label>
                        <textarea id="message"
                                  name="message"
                                  rows="10"
                                  placeholder="Type your message here..."
                                  class="form-textarea"
                                  required></textarea>
                        <div class="char-counter">
                            <span id="charCount">0</span> characters
                        </div>
                    </div>

                    <!-- Quick Templates -->
                    <div class="templates-section">
                        <label>Quick Templates</label>
                        <div class="template-buttons">
                            <button type="button" class="template-btn" onclick="useTemplate('welcome')">
                                Welcome Message
                            </button>
                            <button type="button" class="template-btn" onclick="useTemplate('interview')">
                                Interview Invitation
                            </button>
                            <button type="button" class="template-btn" onclick="useTemplate('feedback')">
                                Feedback Request
                            </button>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" class="btn-send">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                        </svg>
                        Send Email
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    // Character counter
    const messageField = document.getElementById('message');
    const charCount = document.getElementById('charCount');

    messageField.addEventListener('input', function() {
        charCount.textContent = this.value.length;
    });

    // Template functions
    function useTemplate(type) {
        const userName = document.querySelector('.user-title h1').textContent;
        const subjectField = document.getElementById('subject');
        const messageField = document.getElementById('message');

        const templates = {
            welcome: {
                subject: 'Welcome to Our Team!',
                message: `Dear ${userName},\n\nWe are excited to welcome you to our team! We believe your skills and experience will be a great addition to our organization.\n\nWe look forward to working with you.\n\nBest regards,\nHR Team`
            },
            interview: {
                subject: 'Interview Invitation',
                message: `Dear ${userName},\n\nWe would like to invite you for an interview. Please let us know your availability for the upcoming week.\n\nWe look forward to meeting you.\n\nBest regards,\nHR Team`
            },
            feedback: {
                subject: 'Feedback Request',
                message: `Dear ${userName},\n\nWe would appreciate your feedback on your recent experience. Your input is valuable to us and helps us improve.\n\nPlease share your thoughts at your earliest convenience.\n\nBest regards,\nHR Team`
            }
        };

        if (templates[type]) {
            subjectField.value = templates[type].subject;
            messageField.value = templates[type].message;
            charCount.textContent = messageField.value.length;
        }
    }
</script>
</body>
</html>